const fs = global.nodemodule["fs-extra"];
const path = global.nodemodule["path"];

module.exports.config = {
  name: "autoreplybot",
  version: "6.1.1",
  hasPermssion: 0,
  credits: "ЁЭРТЁЭРбЁЭРЪЁЭРбЁЭРЪЁЭРЭЁЭРЪЁЭРн ЁЭРИЁЭРмЁЭРеЁЭРЪЁЭРж",
  description: "Auto-response bot",
  commandCategory: "No Prefix",
  usages: "[any trigger]",
  cooldowns: 3,
};

// Typing effect function
async function sendTyping(api, threadID, time = 1500) {
  try {
    await api.sendTypingIndicator(threadID, true); // ржЯрж╛ржЗржкрж┐ржВ рж╢рзБрж░рзБ
    await new Promise(resolve => setTimeout(resolve, time)); // ржХрж┐ржЫрзБ рж╕ржорзЯ ржзрж░рзЗ ржЯрж╛ржЗржкрж┐ржВ
    await api.sendTypingIndicator(threadID, false); // ржЯрж╛ржЗржкрж┐ржВ ржмржирзНржз
  } catch (err) {
    console.error("Typing error:", err);
  }
}

module.exports.handleEvent = async function ({ api, event, Users }) {
  const { threadID, messageID, senderID, body } = event;
  if (!body) return; 
  const name = await Users.getNameUser(senderID);
  const msg = body.toLowerCase().trim();

  // Typing times per trigger (optional, default 1500ms)
  const typingTimes = {
    "hi": 1500,
    "good morning": 2000,
    "bye": 1200,
    "i love you": 2500,
    "assalamualaikum": 1500,
    // ржЪрж╛ржЗрж▓рзЗ ржЖрж░рзЛ trigger add ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи
  };

  const responses = {
    "miss you": "ржЕрж░рзЗржХ ржмрзЗржбрж╛рж░рзЗ Miss ржирж╛ ржХрж░рзЗ xan ржорзЗржпрж╝рзЗ рж╣рж▓рзЗ ржмрж╕ рж╢рж╛рж╣рж╛ржжрзО рж░рзЗ рж╣рж╛ржЩрзНржЧрж╛ ржХрж░рзЛЁЯШ╢ЁЯС╗ЁЯШШ",
    "kiss de": "ржХрж┐рж╕ ржжрж┐рж╕ ржирж╛ рждрзЛрж░ ржорзБржЦрзЗ ржжрзВрж░ ржЧржирзНржз ржХржпрж╝ржжрж┐ржи ржзрж░рзЗ ржжрж╛ржБржд ржмрзНрж░рж╛рж╢ ржХрж░рж┐рж╕ ржирж╛ржЗЁЯдм",
    "ЁЯСН": "рж╕рж░ ржПржЦрж╛ржи ржерзЗржХрзЗ рж▓рж╛ржЗржХрж╛рж░ ржЖржмрж╛рж▓..!ЁЯР╕ЁЯдгЁЯСНтЫПя╕П",
    "help": "Prefix de sala",
    "hi": "ржПржд рж╣рж╛ржЗ-рж╣рзНржпрж╛рж▓рзЛ ржХрж░ ржХрзНржпрж╛ржи ржкрзНрж░рж┐ржУ..!ЁЯШЬЁЯл╡",
    "bc": "SAME TO YOUЁЯШК",
    "pro": "Khud k0o KYa LeGend SmJhTi Hai ЁЯШВ",
    "good morning": "GOOD MORNING ржжрж╛ржд ржмрзНрж░рж╛рж╢ ржХрж░рзЗ ржЦрзЗрзЯрзЗ ржирзЗржУЁЯШЪ",
    "tor ball": "~ ржПржЦржирзЛ ржмрж╛рж▓ ржЙржарзЗ ржирж╛ржЗ ржирж╛ржХрж┐ рждрзЛржорж╛рж░?? ЁЯдЦ",
    "sahu": "ржЙржирж┐ ржПржЦржи ржХрж╛ржЬрзЗ ржмрж┐ржЬрж┐ ржЖржЫрзЗ ржХрж┐ ржмрж▓ржмрзЗржи ржЖржорж╛ржХрзЗ ржмрж▓рждрзЗ ржкрж╛рж░рзЗржи..!ЁЯШШ",
    "owner": "тАО[ЁЭРОЁЭРЦЁЭРНЁЭРДрм░:тШЮ Shahadat IslamтШЬ\nFacebook: https://www.facebook.com/profile.php?id=100001039692046\nWhatsApp: +8801882333052",
    "admin": "He is SAHU рждрж╛ржХрзЗ рж╕ржмрж╛ржЗ Cyber Bot Team Saport Admin рж╣рж┐рж╕рзЗржмрзЗ ржЪрж┐ржирзЗЁЯШШтШ║я╕П",
    "babi": "ржП рждрзЛ рж╣рж╛ржЫрж┐ржирж╛ рж╣рзЗ ржорзЗрж░рзЗ ржжрж┐рж▓ржХрж┐ ржжрж╛рж░ржХрж╛ржи рж╣рзЗ ржорзЗрж░рж┐ ржЬрж╛ржи рж╣рзЗЁЯШН.",
    "chup": "рждрзБржЗ ржЪрзБржк ржЪрзБржк ржХрж░ ржкрж╛ржЧрж▓ ржЫрж╛ржЧрж▓",
    "assalamualaikum": "Walaikum Assalam ЁЯТл",
    "kiss me": "рждрзБржорж┐ ржкржБржЪрж╛ рждрзЛржорж╛ржХрзЗ ржХрж┐рж╕ ржжрж┐ржмрзЛ ржирж╛ ЁЯдн",
    "thanks": "ржПрждрзЛ ржзржирзНржпржмрж╛ржж ржирж╛ ржжрж┐ржпрж╝рзЗ ржЖржорж╛рж░ ржмрж╕ SAHU рж░рзЗ рждрзЛрж░ ржЧрж╛рж░рзНрж▓ржлрзНрж░рзЗржирзНржб ржЯрж╛ ржжрж┐ржпрж╝рзЗ ржжрзЗ..!ЁЯР╕ЁЯе╡",
    "i love you": "ржорзЗржпрж╝рзЗ рж╣рж▓рзЗ ржЖржорж╛рж░ ржмрж╕ SAHU ржПрж░ ржЗржиржмржХрзНрж╕рзЗ ржПржЦрзБржирж┐ ржЧрзБржБрждрж╛ ржжрж┐ржиЁЯлвЁЯШ╗",
    "by": "ржХрж┐рж░рзЗ рждрзБржЗ ржХржЗ ржпрж╛рж╕ ржХрзЛржи ржорзЗржпрж╝рзЗрж░ рж╕рж╛ржерзЗ ржЪрж┐ржкрж╛ржпрж╝ ржпрж╛ржмрж┐..!ЁЯМЪЁЯМ╢я╕П",
    "ami shahadat": "рж╣рзНржпрж╛ ржмрж╕ ржХрзЗржоржи ржЖржЫрзЗржи..?тШ║я╕П",
    "bot er baccha": "ржЖржорж╛рж░ ржмрж╛ржЪрзНржЪрж╛ рждрзЛ рждрзЛржорж╛рж░ ржЧрж╛рж░рзНрж▓ржлрзНрж░рзЗржирзНржбрзЗрж░ ржкрзЗржЯрзЗ..!!ЁЯМЪтЫПя╕П",
    "tor nam ki": "MY NAME IS ~рж╕рж╛рзНржБрж╣рзБрзНржБрж░рзНржБ ржлрзЗрзНржБржорж╛рзНржБрж╕рзНржБ ржмрзНржБржЯржБ~ЁЯШШЁЯМ║",
    "pic de": "ржПржи ржерзЗржХрзЗ рж╕рж░ ржжрзБрж░рзЗ ржЧрж┐рзЯрж╛ ржорж░ЁЯШТ",
    "cudi": "ржПржд ржЪрзЛржжрж╛ ржЪрзБржжрж┐ ржХрж░рж╕ ржХрзЗржирзЛ..!ЁЯе▒ЁЯМЭЁЯМЪ",
    "bal": "рж░рж╛ржЧ ржХрж░рзЗ ржирж╛ рж╕рзЛржирж╛ ржкрж╛ржЦрж┐ ЁЯе░",
    "heda": "ржПрждрзЛ рж░рж╛ржЧ рж╢рж░рзАрж░рзЗрж░ ржЬржирзНржп ржнрж╛рж▓рзЛ ржирж╛ ЁЯе░",
    "boda": "ржнрж╛ржЗ рждрзБржЗ ржПржд рж╣рж╛рж╕рж┐рж╕ ржирж╛..!ЁЯМЪЁЯдг",
    "love you": "ржнрж╛рж▓рзЛржмрж╛рж╕рж╛ ржирж╛ржоржХ ржЖржмрж▓рж╛ржорзА ржХрж░рждрзЗ ржЪрж╛ржЗрж▓рзЗ Boss SAHU ржПрж░ ржЗржиржмржХрзНрж╕рзЗ ржЧрзБрждрж╛ ржжрж┐ржи ЁЯШШ",
    "kire ki koros": "рждрзЛржорж╛рж░ ржХржерж╛ ржнрж╛ржмрждрзЗ ржЫрж┐ ржЬрж╛ржирзБ",
    "kire bot": "рж╣рзНржпрж╛ржБ рж╕ржм ржХрзЗржоржи ржЖржЫрзЗржи ржЖржкржирж╛рж░ ржУржЗ ржЦрж╛ржирзЗ ржЙржорзНржорж╛рж╣ ЁЯШШЁЯШ╜ЁЯЩИ"
  };

  if (responses[msg]) {
    const typingTime = typingTimes[msg] || 1500; // ржпржжрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЯрж╛ржЗржо ржирж╛ ржерж╛ржХрзЗ рждржмрзЗ default 1.5s
    await sendTyping(api, threadID, typingTime);
    return api.sendMessage(responses[msg], threadID, messageID);
  }
};

module.exports.run = async function ({ api, event, args, Users }) {
  return this.handleEvent({ api, event, Users });
};